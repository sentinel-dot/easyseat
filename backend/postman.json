{
	"info": {
		"_postman_id": "0beca5dd-1025-4cb7-b07b-298ae570f681",
		"name": "Easyseat API Tests - Complete Suite",
		"description": "Complete test suite for Easyseat Backend API - All routes with Happy Path, Error Cases, and Edge Cases",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "45068530",
		"_collection_link": "https://niko-9193311.postman.co/workspace/niko's-Workspace~4848bc39-f3b1-4f7d-87ed-e1aa515b249c/collection/45068530-0beca5dd-1025-4cb7-b07b-298ae570f681?action=share&source=collection_link&creator=45068530"
	},
	"item": [
		{
			"name": "Health & Info",
			"item": [
				{
					"name": "GET Root - API Info",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/health",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"health"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Venues",
			"item": [
				{
					"name": "GET All Venues - Success",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Response has success=true', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"});",
									"",
									"pm.test('Data is an array', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.be.an('array');",
									"});",
									"",
									"pm.test('At least 2 venues exist', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.length).to.be.at.least(2);",
									"});",
									"",
									"pm.test('Venues have required fields', function () {",
									"    const jsonData = pm.response.json();",
									"    const venue = jsonData.data[0];",
									"    pm.expect(venue).to.have.property('id');",
									"    pm.expect(venue).to.have.property('name');",
									"    pm.expect(venue).to.have.property('type');",
									"    pm.expect(venue).to.have.property('email');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/venues",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"venues"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Venue by ID - Bella Vista (ID 1)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Venue name is Bella Vista Restaurant', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.name).to.eql('Bella Vista Restaurant');",
									"});",
									"",
									"pm.test('Venue type is restaurant', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.type).to.eql('restaurant');",
									"});",
									"",
									"pm.test('Has services array', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.services).to.be.an('array');",
									"    pm.expect(jsonData.data.services.length).to.be.at.least(1);",
									"});",
									"",
									"pm.test('Has staff_members array (empty for restaurant)', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.staff_members).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/venues/1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"venues",
								"1"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Venue by ID - Salon Schmidt (ID 2)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Venue name is Salon Schmidt', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.name).to.eql('Salon Schmidt');",
									"});",
									"",
									"pm.test('Venue type is hair_salon', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.type).to.eql('hair_salon');",
									"});",
									"",
									"pm.test('Has staff members', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.staff_members).to.be.an('array');",
									"    pm.expect(jsonData.data.staff_members.length).to.be.greaterThan(0);",
									"});",
									"",
									"pm.test('Staff members have required fields', function () {",
									"    const jsonData = pm.response.json();",
									"    const staff = jsonData.data.staff_members[0];",
									"    pm.expect(staff).to.have.property('id');",
									"    pm.expect(staff).to.have.property('name');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/venues/2",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"venues",
								"2"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Venue Bookings - All",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Response has success=true', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"});",
									"",
									"pm.test('Data is an array', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/venues/1/bookings",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"venues",
								"1",
								"bookings"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Venue Bookings - Filtered by Date",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('All bookings match the date', function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.data.length > 0) {",
									"        jsonData.data.forEach(booking => {",
									"            pm.expect(booking.booking_date).to.include('2025-11-05');",
									"        });",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/venues/1/bookings?date=2025-11-05",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"venues",
								"1",
								"bookings"
							],
							"query": [
								{
									"key": "date",
									"value": "2025-11-05"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Venue Bookings - Filtered by Status",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('All bookings have confirmed status', function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.data.length > 0) {",
									"        jsonData.data.forEach(booking => {",
									"            pm.expect(booking.status).to.eql('confirmed');",
									"        });",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/venues/1/bookings?status=confirmed",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"venues",
								"1",
								"bookings"
							],
							"query": [
								{
									"key": "status",
									"value": "confirmed"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Venue Bookings - Date Range",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Response is an array', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/venues/1/bookings?startDate=2025-11-01&endDate=2025-11-30",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"venues",
								"1",
								"bookings"
							],
							"query": [
								{
									"key": "startDate",
									"value": "2025-11-01"
								},
								{
									"key": "endDate",
									"value": "2025-11-30"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Venue Bookings - Invalid Venue ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400 or 404', function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([400, 404]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/venues/9999/bookings",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"venues",
								"9999",
								"bookings"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Venue by ID - Invalid String",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400', function () {",
									"    pm.response.to.have.status(400);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/venues/invalid",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"venues",
								"invalid"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Venue by ID - Not Found (9999)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 404', function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"pm.test('Error message is Venue not found', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.message).to.eql('Venue not found');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/venues/9999",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"venues",
								"9999"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Availability - Slots",
			"item": [
				{
					"name": "GET Available Slots - Restaurant",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"const tomorrow = new Date();",
									"tomorrow.setDate(tomorrow.getDate() + 1);",
									"const tomorrowStr = tomorrow.toISOString().split('T')[0];",
									"pm.collectionVariables.set('tomorrow', tomorrowStr);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Response has success=true', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"});",
									"",
									"pm.test('Slots array exists', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('time_slots');",
									"    pm.expect(jsonData.data.time_slots).to.be.an('array');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/availability/slots?venueId=1&serviceId=1&date={{tomorrow}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"availability",
								"slots"
							],
							"query": [
								{
									"key": "venueId",
									"value": "1"
								},
								{
									"key": "serviceId",
									"value": "1"
								},
								{
									"key": "date",
									"value": "{{tomorrow}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Available Slots - Hair Salon",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"const tomorrow = new Date();",
									"tomorrow.setDate(tomorrow.getDate() + 1);",
									"const tomorrowStr = tomorrow.toISOString().split('T')[0];",
									"pm.collectionVariables.set('tomorrow', tomorrowStr);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Has staff-specific slots', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.time_slots).to.be.an('array');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/availability/slots?venueId=2&serviceId=4&staffMemberId=1&date={{tomorrow}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"availability",
								"slots"
							],
							"query": [
								{
									"key": "venueId",
									"value": "2"
								},
								{
									"key": "serviceId",
									"value": "4"
								},
								{
									"key": "staffMemberId",
									"value": "1"
								},
								{
									"key": "date",
									"value": "{{tomorrow}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Available Week Slots",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"const startDate = new Date();",
									"startDate.setDate(startDate.getDate() + 1);",
									"const startDateStr = startDate.toISOString().split('T')[0];",
									"pm.collectionVariables.set('tomorrow', startDateStr);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Has week data', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.length.at.least(1);",
									"    pm.expect(jsonData.data).to.be.an('array');",
									"});",
									"",
									"pm.test('Each day has required fields', function () {",
									"    const jsonData = pm.response.json();",
									"    jsonData.data.forEach(day => {",
									"        pm.expect(day).to.have.property('date');",
									"        pm.expect(day).to.have.property('day_of_week');",
									"        pm.expect(day).to.have.property('time_slots');",
									"        pm.expect(day.time_slots).to.be.an('array');",
									"    });",
									"});",
									"",
									"pm.test('Time slots have correct structure', function () {",
									"    const jsonData = pm.response.json();",
									"    const firstDay = jsonData.data[0];",
									"    const firstSlot = firstDay.time_slots[0];",
									"    ",
									"    pm.expect(firstSlot).to.have.property('start_time');",
									"    pm.expect(firstSlot).to.have.property('end_time');",
									"    pm.expect(firstSlot).to.have.property('available');",
									"    pm.expect(firstSlot).to.have.property('remaining_capacity');",
									"});",
									"",
									"pm.test('Returns 7 days for week view', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.lengthOf(7);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/availability/week?venueId=1&serviceId=1&startDate={{tomorrow}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"availability",
								"week"
							],
							"query": [
								{
									"key": "venueId",
									"value": "1"
								},
								{
									"key": "serviceId",
									"value": "1"
								},
								{
									"key": "startDate",
									"value": "{{tomorrow}}"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Availability - Validation",
			"item": [
				{
					"name": "POST Check Availability - Available",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"const tomorrow = new Date();",
									"tomorrow.setDate(tomorrow.getDate() + 1);",
									"const tomorrowStr = tomorrow.toISOString().split('T')[0];",
									"pm.collectionVariables.set('tomorrow', tomorrowStr);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Slot is available', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.available).to.be.true;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"venueId\": 1,\n  \"serviceId\": 1,\n  \"date\": \"{{tomorrow}}\",\n  \"startTime\": \"18:00\",\n  \"endTime\": \"20:00\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/availability/check",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"availability",
								"check"
							]
						}
					},
					"response": []
				},
				{
					"name": "POST Check Availability - Outside Business Hours",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"const tomorrow = new Date();",
									"tomorrow.setDate(tomorrow.getDate() + 1);",
									"const tomorrowStr = tomorrow.toISOString().split('T')[0];",
									"pm.collectionVariables.set('tomorrow', tomorrowStr);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Slot is not available (outside hours)', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.available).to.be.false;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"venueId\": 1,\n  \"serviceId\": 1,\n  \"date\": \"{{tomorrow}}\",\n  \"startTime\": \"03:00\",\n  \"endTime\": \"04:00\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/availability/check",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"availability",
								"check"
							]
						}
					},
					"response": []
				},
				{
					"name": "POST Validate Booking Request - Valid",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"const tomorrow = new Date();",
									"tomorrow.setDate(tomorrow.getDate() + 1);",
									"const tomorrowStr = tomorrow.toISOString().split('T')[0];",
									"pm.collectionVariables.set('tomorrow', tomorrowStr);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Validation passed', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.valid).to.be.true;",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"venueId\": 1,\n  \"serviceId\": 1,\n  \"bookingDate\": \"{{tomorrow}}\",\n  \"startTime\": \"19:00\",\n  \"endTime\": \"21:00\",\n  \"partySize\": 2\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/availability/validate",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"availability",
								"validate"
							]
						}
					},
					"response": []
				},
				{
					"name": "POST Validate Booking - Invalid Party Size (Zero)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"const tomorrow = new Date();",
									"tomorrow.setDate(tomorrow.getDate() + 1);",
									"const tomorrowStr = tomorrow.toISOString().split('T')[0];",
									"pm.collectionVariables.set('tomorrow', tomorrowStr);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Validation failed with errors', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.valid).to.be.false;",
									"    pm.expect(jsonData.data.errors).to.be.an('array');",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"venueId\": 1,\n  \"serviceId\": 1,\n  \"bookingDate\": \"{{tomorrow}}\",\n  \"startTime\": \"14:00\",\n  \"endTime\": \"16:00\",\n  \"partySize\": 0\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/availability/validate",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"availability",
								"validate"
							]
						}
					},
					"response": []
				},
				{
					"name": "POST Validate - Past Date",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Validation failed for past date', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.valid).to.be.false;",
									"    pm.expect(jsonData.data.errors).to.be.an('array');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"venueId\": 1,\n  \"serviceId\": 1,\n  \"bookingDate\": \"2020-01-01\",\n  \"startTime\": \"14:00\",\n  \"endTime\": \"16:00\",\n  \"partySize\": 4\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/availability/validate",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"availability",
								"validate"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Availability - Service & Staff",
			"item": [
				{
					"name": "GET Service Details",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Service details returned', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('id');",
									"    pm.expect(jsonData.data).to.have.property('name');",
									"    pm.expect(jsonData.data).to.have.property('duration_minutes');",
									"    pm.expect(jsonData.data).to.have.property('price');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/availability/service/4?venueId=2",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"availability",
								"service",
								"4"
							],
							"query": [
								{
									"key": "venueId",
									"value": "2"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Service Details - Missing venueId",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400', function () {",
									"    pm.response.to.have.status(400);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/availability/service/1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"availability",
								"service",
								"1"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Staff Can Perform - Anna All Services",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Anna can perform service', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.canPerform).to.be.true;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/availability/staff/1/can-perform/4",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"availability",
								"staff",
								"1",
								"can-perform",
								"4"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Staff Can Perform - Klaus Only Herrenhaarschnitt",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Klaus can perform Herrenhaarschnitt', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.canPerform).to.be.true;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/availability/staff/2/can-perform/4",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"availability",
								"staff",
								"2",
								"can-perform",
								"4"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Staff Can Perform - Klaus Cannot Do Damenhaarschnitt",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Klaus cannot perform Damenhaarschnitt', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.canPerform).to.be.false;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/availability/staff/2/can-perform/5",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"availability",
								"staff",
								"2",
								"can-perform",
								"5"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Staff Can Perform - Invalid Staff ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Returns false for invalid staff', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.canPerform).to.be.false;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/availability/staff/999/can-perform/4",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"availability",
								"staff",
								"999",
								"can-perform",
								"4"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Staff Can Perform - Non-existent Service",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Cannot perform (service does not exist)', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.canPerform).to.be.false;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/availability/staff/1/can-perform/9999",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"availability",
								"staff",
								"1",
								"can-perform",
								"9999"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Booking - Create",
			"item": [
				{
					"name": "✅ Create Restaurant Booking (Success)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test: Status Code sollte 201 sein",
									"pm.test('Status code is 201 Created', function() {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"// Test: Response sollte JSON sein",
									"pm.test('Response is JSON', function() {",
									"    pm.response.to.be.json;",
									"});",
									"",
									"// Parse Response",
									"const response = pm.response.json();",
									"",
									"// Test: Success Flag",
									"pm.test('Success flag is true', function() {",
									"    pm.expect(response.success).to.be.true;",
									"});",
									"",
									"// Test: Message vorhanden",
									"pm.test('Success message present', function() {",
									"    pm.expect(response.message).to.include('successfully');",
									"});",
									"",
									"// Test: Data vorhanden",
									"pm.test('Booking data present', function() {",
									"    pm.expect(response.data).to.exist;",
									"    pm.expect(response.data.id).to.exist;",
									"    pm.expect(response.data.booking_token).to.exist;",
									"});",
									"",
									"// Test: Booking Token ist UUID v4",
									"pm.test('Booking token is valid UUID', function() {",
									"    const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;",
									"    pm.expect(response.data.booking_token).to.match(uuidRegex);",
									"});",
									"",
									"// Test: Status ist 'pending'",
									"pm.test('Booking status is pending', function() {",
									"    pm.expect(response.data.status).to.equal('pending');",
									"});",
									"",
									"// Test: Alle Request-Daten sind gespeichert",
									"const requestData = JSON.parse(pm.request.body.raw);",
									"pm.test('All booking data saved correctly', function() {",
									"    pm.expect(response.data.venue_id).to.equal(requestData.venue_id);",
									"    pm.expect(response.data.service_id).to.equal(requestData.service_id);",
									"    pm.expect(response.data.customer_name).to.equal(requestData.customer_name);",
									"    pm.expect(response.data.customer_email).to.equal(requestData.customer_email);",
									"    pm.expect(response.data.party_size).to.equal(requestData.party_size);",
									"});",
									"",
									"// Speichere ID und Token für weitere Tests",
									"if (response.data) {",
									"    pm.collectionVariables.set('bookingId', response.data.id);",
									"    pm.collectionVariables.set('bookingToken', response.data.booking_token);",
									"    console.log('Saved bookingId:', response.data.id);",
									"    console.log('Saved bookingToken:', response.data.bookingToken);",
									"}"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"venue_id\": 1,\n  \"service_id\": 2,\n  \"customer_name\": \"Max Mustermann\",\n  \"customer_email\": \"{{customerEmail}}\",\n  \"customer_phone\": \"+49 170 1234567\",\n  \"booking_date\": \"2025-11-15\",\n  \"start_time\": \"19:00\",\n  \"end_time\": \"21:00\",\n  \"party_size\": 4,\n  \"special_requests\": \"Fensterplatz bevorzugt\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/bookings",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings"
							]
						},
						"description": "Erstellt eine neue Restaurant-Buchung für Tisch für 4 Personen"
					},
					"response": []
				},
				{
					"name": "✅ Create Salon Booking with Staff (Success)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 201', function() {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Booking created with staff member', function() {",
									"    pm.expect(response.data.staff_member_id).to.equal(1);",
									"});",
									"",
									"pm.test('Service requires staff', function() {",
									"    pm.expect(response.data.service_id).to.equal(5); // Damenhaarschnitt",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"venue_id\": 2,\n  \"service_id\": 5,\n  \"staff_member_id\": 1,\n  \"customer_name\": \"Lisa Weber\",\n  \"customer_email\": \"lisa@example.com\",\n  \"customer_phone\": \"+49 170 9876543\",\n  \"booking_date\": \"2025-11-12\",\n  \"start_time\": \"10:00\",\n  \"end_time\": \"11:30\",\n  \"party_size\": 1,\n  \"total_amount\": 55.00\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/bookings",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings"
							]
						},
						"description": "Erstellt Salon-Buchung mit Staff Member (Anna Schmidt)"
					},
					"response": []
				},
				{
					"name": "❌ Create Booking - Empty Body",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400 Bad Request', function() {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Success flag is false', function() {",
									"    pm.expect(response.success).to.be.false;",
									"});",
									"",
									"pm.test('Error message mentions empty body', function() {",
									"    pm.expect(response.message).to.include('body');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{baseUrl}}/bookings",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings"
							]
						},
						"description": "Test: Leerer Request Body sollte abgelehnt werden"
					},
					"response": []
				},
				{
					"name": "❌ Create Booking - Missing Required Fields",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400', function() {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Error mentions missing fields', function() {",
									"    pm.expect(response.message).to.include('Missing required fields');",
									"});",
									"",
									"pm.test('Lists specific missing fields', function() {",
									"    pm.expect(response.message).to.include('customer_email');",
									"    pm.expect(response.message).to.include('start_time');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"venue_id\": 1,\n  \"service_id\": 2,\n  \"customer_name\": \"Test User\",\n  \"booking_date\": \"2025-11-15\",\n  \"party_size\": 2\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/bookings",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings"
							]
						},
						"description": "Test: Fehlende Pflichtfelder (customer_email, start_time, end_time)"
					},
					"response": []
				},
				{
					"name": "❌ Create Booking - Invalid Email Format",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400', function() {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Error mentions invalid email', function() {",
									"    pm.expect(response.message).to.include('email format');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"venue_id\": 1,\n  \"service_id\": 2,\n  \"customer_name\": \"Test User\",\n  \"customer_email\": \"invalid-email\",\n  \"booking_date\": \"2025-11-15\",\n  \"start_time\": \"19:00\",\n  \"end_time\": \"21:00\",\n  \"party_size\": 2\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/bookings",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings"
							]
						},
						"description": "Test: Ungültiges Email-Format"
					},
					"response": []
				},
				{
					"name": "❌ Create Booking - Invalid Date Format",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400', function() {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Error mentions invalid date format', function() {",
									"    pm.expect(response.message).to.include('date format');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"venue_id\": 1,\n  \"service_id\": 2,\n  \"customer_name\": \"Test User\",\n  \"customer_email\": \"test@example.com\",\n  \"booking_date\": \"15.11.2025\",\n  \"start_time\": \"19:00\",\n  \"end_time\": \"21:00\",\n  \"party_size\": 2\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/bookings",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings"
							]
						},
						"description": "Test: Falsches Datumsformat (DD.MM.YYYY statt YYYY-MM-DD)"
					},
					"response": []
				},
				{
					"name": "❌ Create Booking - Invalid Time Format",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400', function() {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Error mentions invalid time format', function() {",
									"    pm.expect(response.message).to.include('time format');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"venue_id\": 1,\n  \"service_id\": 2,\n  \"customer_name\": \"Test User\",\n  \"customer_email\": \"test@example.com\",\n  \"booking_date\": \"2025-11-15\",\n  \"start_time\": \"19\",\n  \"end_time\": \"9pm\",\n  \"party_size\": 2\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/bookings",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings"
							]
						},
						"description": "Test: Falsches Zeitformat (nicht HH:MM)"
					},
					"response": []
				},
				{
					"name": "❌ Create Booking - Invalid Party Size",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400', function() {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Error mentions party size', function() {",
									"    pm.expect(response.message).to.include('party_size');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"venue_id\": 1,\n  \"service_id\": 2,\n  \"customer_name\": \"Test User\",\n  \"customer_email\": \"test@example.com\",\n  \"booking_date\": \"2025-11-15\",\n  \"start_time\": \"19:00\",\n  \"end_time\": \"21:00\",\n  \"party_size\": 0\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/bookings",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings"
							]
						},
						"description": "Test: Party size = 0 sollte abgelehnt werden"
					},
					"response": []
				},
				{
					"name": "❌ Create Booking - Slot Not Available",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 409 Conflict', function() {",
									"    pm.response.to.have.status(409);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Error mentions availability', function() {",
									"    pm.expect(response.message).to.include('not available');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"venue_id\": 1,\n  \"service_id\": 2,\n  \"customer_name\": \"Double Booking Test\",\n  \"customer_email\": \"conflict@example.com\",\n  \"booking_date\": \"2025-11-15\",\n  \"start_time\": \"19:00\",\n  \"end_time\": \"21:00\",\n  \"party_size\": 4\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/bookings",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings"
							]
						},
						"description": "Test: Versuche denselben Slot nochmal zu buchen (sollte 409 Conflict geben)"
					},
					"response": []
				}
			],
			"description": "Tests für das Erstellen neuer Buchungen"
		},
		{
			"name": "Booking - Get",
			"item": [
				{
					"name": "✅ Get Booking by ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Booking data retrieved', function() {",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.data).to.exist;",
									"    pm.expect(response.data.id).to.equal(parseInt(pm.collectionVariables.get('bookingId')));",
									"});",
									"",
									"pm.test('Booking has all required fields', function() {",
									"    const booking = response.data;",
									"    pm.expect(booking).to.have.property('booking_token');",
									"    pm.expect(booking).to.have.property('customer_name');",
									"    pm.expect(booking).to.have.property('booking_date');",
									"    pm.expect(booking).to.have.property('status');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/bookings/{{bookingId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"{{bookingId}}"
							]
						},
						"description": "Ruft die erstellte Buchung über ihre ID ab"
					},
					"response": []
				},
				{
					"name": "✅ Get Booking by Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Booking retrieved by token', function() {",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.data.booking_token).to.equal(pm.collectionVariables.get('bookingToken'));",
									"});",
									"",
									"pm.test('Includes venue and service names', function() {",
									"    pm.expect(response.data).to.have.property('venue_name');",
									"    pm.expect(response.data).to.have.property('service_name');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/bookings/manage/{{bookingToken}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"manage",
								"{{bookingToken}}"
							]
						},
						"description": "Ruft Buchung über Token ab (für Management-Seite)"
					},
					"response": []
				},
				{
					"name": "✅ Get Bookings by Customer Email",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Returns array of bookings', function() {",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.data).to.be.an('array');",
									"});",
									"",
									"pm.test('At least one booking found', function() {",
									"    pm.expect(response.data.length).to.be.at.least(1);",
									"});",
									"",
									"pm.test('All bookings have correct email', function() {",
									"    const testEmail = pm.collectionVariables.get('customerEmail');",
									"    response.data.forEach(booking => {",
									"        pm.expect(booking.customer_email).to.equal(testEmail);",
									"    });",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/bookings/customer/{{customerEmail}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"customer",
								"{{customerEmail}}"
							]
						},
						"description": "Ruft alle Buchungen für eine Email-Adresse ab"
					},
					"response": []
				},
				{
					"name": "❌ Get Booking - Invalid ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400', function() {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Error mentions invalid ID', function() {",
									"    pm.expect(response.message).to.include('Invalid booking ID');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/bookings/abc",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"abc"
							]
						},
						"description": "Test: Nicht-numerische ID sollte 400 geben"
					},
					"response": []
				},
				{
					"name": "❌ Get Booking - Not Found",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 404', function() {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Error mentions not found', function() {",
									"    pm.expect(response.message).to.include('not found');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/bookings/999999",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"999999"
							]
						},
						"description": "Test: Nicht existierende ID sollte 404 geben"
					},
					"response": []
				},
				{
					"name": "❌ Get Booking by Token - Invalid Token Format",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400', function() {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Error mentions invalid token', function() {",
									"    pm.expect(response.message).to.include('Invalid booking token');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/bookings/manage/invalid-token-123",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"manage",
								"invalid-token-123"
							]
						},
						"description": "Test: Ungültiges Token-Format"
					},
					"response": []
				},
				{
					"name": "❌ Get Booking by Email - Invalid Email",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400', function() {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Error mentions invalid email', function() {",
									"    pm.expect(response.message).to.include('email format');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/bookings/customer/not-an-email",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"customer",
								"not-an-email"
							]
						},
						"description": "Test: Ungültiges Email-Format"
					},
					"response": []
				}
			],
			"description": "Tests für das Abrufen von Buchungen"
		},
		{
			"name": "Booking - Update",
			"item": [
				{
					"name": "✅ Update Booking - Change Date and Time",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Booking updated successfully', function() {",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.message).to.include('updated');",
									"});",
									"",
									"const requestData = JSON.parse(pm.request.body.raw);",
									"pm.test('Date and time were updated', function() {",
									"    pm.expect(response.data.booking_date).to.include(requestData.booking_date);",
									"    pm.expect(response.data.start_time).to.equal(requestData.start_time);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"booking_date\": \"2025-11-16\",\n  \"start_time\": \"18:00\",\n  \"end_time\": \"20:00\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/bookings/manage/{{bookingToken}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"manage",
								"{{bookingToken}}"
							]
						},
						"description": "Ändert Datum und Uhrzeit der Buchung"
					},
					"response": []
				},
				{
					"name": "✅ Update Booking - Change Party Size",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const response = pm.response.json();",
									"const requestData = JSON.parse(pm.request.body.raw);",
									"",
									"pm.test('Party size updated', function() {",
									"    pm.expect(response.data.party_size).to.equal(requestData.party_size);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"party_size\": 2\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/bookings/manage/{{bookingToken}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"manage",
								"{{bookingToken}}"
							]
						},
						"description": "Ändert die Personenzahl"
					},
					"response": []
				},
				{
					"name": "✅ Update Booking - Change Special Requests",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const response = pm.response.json();",
									"const requestData = JSON.parse(pm.request.body.raw);",
									"",
									"pm.test('Special requests updated', function() {",
									"    pm.expect(response.data.special_requests).to.equal(requestData.special_requests);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"special_requests\": \"Allergien: Nüsse, bitte Hochstuhl bereitstellen\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/bookings/manage/{{bookingToken}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"manage",
								"{{bookingToken}}"
							]
						},
						"description": "Ändert spezielle Wünsche"
					},
					"response": []
				},
				{
					"name": "❌ Update Booking - Invalid Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400', function() {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Error mentions invalid token', function() {",
									"    pm.expect(response.message).to.include('Invalid booking token');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"party_size\": 3\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/bookings/manage/invalid-token",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"manage",
								"invalid-token"
							]
						},
						"description": "Test: Ungültiger Token"
					},
					"response": []
				},
				{
					"name": "❌ Update Booking - No Updates Provided",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400', function() {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Error mentions no updates', function() {",
									"    pm.expect(response.message).to.include('No updates');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{baseUrl}}/bookings/manage/{{bookingToken}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"manage",
								"{{bookingToken}}"
							]
						},
						"description": "Test: Leeres Update sollte abgelehnt werden"
					},
					"response": []
				},
				{
					"name": "❌ Update Booking - Invalid Fields",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400', function() {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Error mentions invalid fields', function() {",
									"    pm.expect(response.message).to.include('Invalid fields');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"confirmed\",\n  \"total_amount\": 100.00\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/bookings/manage/{{bookingToken}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"manage",
								"{{bookingToken}}"
							]
						},
						"description": "Test: Nicht erlaubte Felder (status, total_amount)"
					},
					"response": []
				}
			],
			"description": "Tests für das Aktualisieren von Buchungen"
		},
		{
			"name": "Booking - Confirm",
			"item": [
				{
					"name": "✅ Confirm Booking",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Booking confirmed', function() {",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.data.status).to.equal('confirmed');",
									"});",
									"",
									"pm.test('Confirmation response valid', function() {",
									"    pm.expect(response.data.status).to.equal('confirmed');",
									"    // confirmation_sent_at wird vom E-Mail-Service nach Versand gesetzt, kann bis dahin null sein",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/bookings/{{bookingId}}/confirm",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"{{bookingId}}",
								"confirm"
							]
						},
						"description": "Bestätigt eine Buchung (Status: pending → confirmed)"
					},
					"response": []
				},
				{
					"name": "❌ Confirm Booking - Invalid ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400', function() {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Error mentions invalid ID', function() {",
									"    pm.expect(response.message).to.include('Invalid booking ID');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/bookings/abc/confirm",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"abc",
								"confirm"
							]
						},
						"description": "Test: Ungültige ID"
					},
					"response": []
				},
				{
					"name": "❌ Confirm Booking - Not Found",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 404', function() {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Error mentions not found', function() {",
									"    pm.expect(response.message).to.include('not found');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/bookings/999999/confirm",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"999999",
								"confirm"
							]
						},
						"description": "Test: Nicht existierende Buchung"
					},
					"response": []
				}
			],
			"description": "Tests für Buchungsbestätigung"
		},
		{
			"name": "Booking - Cancel",
			"item": [
				{
					"name": "✅ Cancel Booking with Reason",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Booking cancelled', function() {",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.data.status).to.equal('cancelled');",
									"});",
									"",
									"pm.test('Cancellation reason saved', function() {",
									"    pm.expect(response.data.cancellation_reason).to.exist;",
									"});",
									"",
									"pm.test('Cancellation timestamp set', function() {",
									"    pm.expect(response.data.cancelled_at).to.exist;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"reason\": \"Kunde ist krank geworden\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/bookings/manage/{{bookingToken}}/cancel",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"manage",
								"{{bookingToken}}",
								"cancel"
							]
						},
						"description": "Storniert eine Buchung mit Grund"
					},
					"response": []
				},
				{
					"name": "❌ Cancel Booking - Already Cancelled",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400', function() {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Error mentions already cancelled', function() {",
									"    pm.expect(response.message).to.include('already cancelled');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"reason\": \"Erneuter Stornierungsversuch\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/bookings/manage/{{bookingToken}}/cancel",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"manage",
								"{{bookingToken}}",
								"cancel"
							]
						},
						"description": "Test: Bereits stornierte Buchung kann nicht nochmal storniert werden"
					},
					"response": []
				},
				{
					"name": "❌ Cancel Booking - Invalid Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400 or 401', function() {",
									"    pm.expect(pm.response.code).to.be.oneOf([400, 401]);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Error mentions invalid token', function() {",
									"    pm.expect(response.message.toLowerCase()).to.include('token');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"reason\": \"Test\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/bookings/manage/invalid-token-format/cancel",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"manage",
								"invalid-token-format",
								"cancel"
							]
						},
						"description": "Test: Ungültiger Token"
					},
					"response": []
				}
			],
			"description": "Tests für Buchungsstornierung"
		},
		{
			"name": "Booking - Delete",
			"item": [
				{
					"name": "✅ Delete Booking (Hard Delete)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Booking deleted permanently', function() {",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.message).to.include('deleted permanently');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/bookings/{{bookingId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"{{bookingId}}"
							]
						},
						"description": "⚠️ HARD DELETE - Löscht Buchung permanent aus DB"
					},
					"response": []
				},
				{
					"name": "❌ Delete Booking - Invalid ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400', function() {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Error mentions invalid ID', function() {",
									"    pm.expect(response.message).to.include('Invalid booking ID');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/bookings/abc",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"abc"
							]
						},
						"description": "Test: Ungültige ID"
					},
					"response": []
				},
				{
					"name": "✅ Verify Booking Deleted",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 404', function() {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"const response = pm.response.json();",
									"",
									"pm.test('Booking no longer exists', function() {",
									"    pm.expect(response.message).to.include('not found');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/bookings/{{bookingId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"bookings",
								"{{bookingId}}"
							]
						},
						"description": "Verifiziert, dass die Buchung wirklich gelöscht wurde"
					},
					"response": []
				}
			],
			"description": "Tests für permanentes Löschen von Buchungen"
		},
		{
			"name": "Edge Cases & Errors",
			"item": [
				{
					"name": "GET 404 - Invalid Route",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 404', function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"pm.test('Error message mentions route not found', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.message).to.include('not found');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/invalid-route",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"invalid-route"
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:5001"
		},
		{
			"key": "tomorrow",
			"value": ""
		},
		{
			"key": "bookingId",
			"value": ""
		},
		{
			"key": "bookingIdForCancellation",
			"value": ""
		},
		{
			"key": "managementToken",
			"value": ""
		},
		{
			"key": "managementTokenCancelled",
			"value": ""
		},
		{
			"key": "customerEmail",
			"value": "test@example.com"
		},
		{
			"key": "bookingToken",
			"value": ""
		}
	]
}